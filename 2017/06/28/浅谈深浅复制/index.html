<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>Hello World - 孤笠酌温</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com/yatttto"><span>Github</span></a></li><li><a href="https://www.v2ex.com/member/2b2some"><span>V2EX</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="/gif/article.png"><div class="post-title"><h1 class="title">Hello World</h1><ul class="meta"><li><i class="icon icon-author"></i>孑此身</li><li><i class="icon icon-clock"></i>4 Minutes</li><li><i class="icon icon-calendar"></i>June 28, 2017</li></ul></div></div><div class="article-content" style="max-width:800px"><h1 id="浅谈深浅复制"><a href="#浅谈深浅复制" class="headerlink" title="浅谈深浅复制"></a>浅谈深浅复制</h1><h2 id="深浅复制"><a href="#深浅复制" class="headerlink" title="深浅复制"></a>深浅复制</h2><p>​    像程序a=b这样的赋值是最常见的，但是这种赋值只是实际上创建了a的一个副本，实际上是创建了一个新的引用浅拷贝就是我们常常用的最基本的复制方法。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = range(5) <span class="comment">#python2.7</span></div><div class="line">&gt;&gt;&gt; a</div><div class="line">[0, 1, 2, 3, 4]</div><div class="line">&gt;&gt;&gt; b = a <span class="comment">#b是对a的引用</span></div><div class="line">&gt;&gt;&gt; b</div><div class="line">[0, 1, 2, 3, 4]</div><div class="line">&gt;&gt;&gt; b is a </div><div class="line">True</div><div class="line">&gt;&gt;&gt; a[0]= -1</div><div class="line">&gt;&gt;&gt; a <span class="comment">#当a中的元素发生改变时，b也会相应的改变</span></div><div class="line">[-1, 1, 2, 3, 4]</div><div class="line">&gt;&gt;&gt; b</div><div class="line">[-1, 1, 2, 3, 4]</div></pre></td></tr></table></figure>
<p>​    深浅复制也就是我们说的深浅拷贝比如<code>copy</code>，或者<code>list()</code>这种形式都是属于浅复制。浅复制会创建一个新对象，但是只是对最顶层进行拷贝。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = [1,2,3,4,[5,6,7]]</div><div class="line">&gt;&gt;&gt; b = list(a) <span class="comment">#浅拷贝</span></div><div class="line">&gt;&gt;&gt; b</div><div class="line">[1, 2, 3, 4, [5, 6, 7]]</div><div class="line">&gt;&gt;&gt; b is a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; a[-1][-1]=8 <span class="comment">#这里只是对顶层进行拷贝，所以b中嵌套的元素发生改变</span></div><div class="line">&gt;&gt;&gt; a</div><div class="line">[1, 2, 3, 4, [5, 6, 8]]</div><div class="line">&gt;&gt;&gt; b</div><div class="line">[1, 2, 3, 4, [5, 6, 8]]</div><div class="line">&gt;&gt;&gt; a[0]=0 <span class="comment">#这里并么有发生改变</span></div><div class="line">&gt;&gt;&gt; a</div><div class="line">[0, 2, 3, 4, [5, 6, 8]]</div><div class="line">&gt;&gt;&gt; b</div><div class="line">[1, 2, 3, 4, [5, 6, 8]]</div></pre></td></tr></table></figure>
<p>​    深拷贝，我们一般用<code>copy</code>模块。深复制会创建一个新对象，并且递归的复制所有的对象。我们一般用<code>copy</code>模块中的<code>deepcopy()</code>函数来完成。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = [1,2,3,[4,5]]</div><div class="line">&gt;&gt;&gt; b = copy.deepcopy(a)</div><div class="line">&gt;&gt;&gt; a is b</div><div class="line">False</div><div class="line">&gt;&gt;&gt; b[3][0] = 0</div><div class="line">&gt;&gt;&gt; a</div><div class="line">[1, 2, 3, [4, 5]]</div><div class="line">&gt;&gt;&gt; b</div><div class="line">[1, 2, 3, [0, 5]]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>​    换一种思路来想，或者说的通俗一点：<strong>赋值</strong>等于是创建一个新的引用，这个新的引用指向的还是原来的同一个对象。<strong>浅复制</strong>是对最顶层进行一个复制，顶层元素是新的，但是如果有嵌套元素的话，如果发生改变，还是会影响到后者。<strong>深复制</strong>和浅复制比起来就很“深”，等于是递归的复制所有对象，所以当前者无论怎么发生改变也不会影响后者。</p>
</div><div class="article-meta" style="max-width:800px"></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="cj4h3zbnt0000e0cpwkalkpgt" data-title="Hello World" data-url="http://yoursite.com/2017/06/28/浅谈深浅复制/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2017/06/27/leetcode/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/yatttto" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/3226322042" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2017 孤笠酌温<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>